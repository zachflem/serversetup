# Server Setup Script for Debian-based Systems

This script helps set up a new VPS (Virtual Private Server) following industry best practices for security and configuration. It's designed for Debian-based systems (Ubuntu, Debian) and provides a junior technician-friendly experience with clear instructions.

## Features

- ✅ Creates a new non-root user with sudo privileges
- ✅ System hardening (firewall, fail2ban, network settings)
- ✅ Secure SSH configuration with key-based authentication
- ✅ Nginx reverse proxy setup
- ✅ GitHub SSH access configuration
- ✅ System monitoring and logging

## Requirements

- A fresh Debian-based VPS (Ubuntu 18.04/20.04/22.04 or Debian 10/11)
- Root access to the server
- SSH access to the server

## Usage

### Option 1: Download and Run

1. SSH into your server as root or a user with sudo privileges.

2. Download the script:
```bash
wget https://raw.githubusercontent.com/yourusername/server-setup/main/server_setup.sh
```

3. Make the script executable:
```bash
chmod +x server_setup.sh
```

4. Run the script with root privileges:
```bash
sudo ./server_setup.sh
```

### Option 2: Run Directly from URL (Not Recommended for Production)

```bash
curl -sSL https://raw.githubusercontent.com/yourusername/server-setup/main/server_setup.sh | sudo bash
```

## What the Script Does

1. **Initial Setup**
   - Updates and upgrades system packages
   - Installs essential security tools

2. **User Management**
   - Creates a new user with sudo privileges
   - Option to generate a strong random password

3. **System Hardening**
   - Configures automatic security updates
   - Sets up Fail2Ban to prevent brute force attacks
   - Hardens network settings via sysctl
   - Secures shared memory

4. **Firewall Configuration**
   - Sets up UFW (Uncomplicated Firewall)
   - Allows SSH on a custom port (randomly generated by default)
   - Opens ports 80 and 443 for Nginx

5. **SSH Configuration**
   - Generates SSH key pair for the new user
   - Disables password authentication and root login
   - Restricts SSH access to the new user only
   - Changes SSH port to the configured custom port

6. **Nginx Setup**
   - Installs and configures Nginx as a reverse proxy
   - Sets up security headers and proper SSL/TLS configuration
   - Creates a template for adding services behind the proxy

7. **GitHub Access**
   - Configures Git for the new user
   - Generates a dedicated SSH key for GitHub access

8. **System Monitoring & Logging**
   - Sets up log rotation
   - Option to install Logwatch for daily log analysis

## After Running the Script

1. Save the generated SSH private key to your local machine
2. Delete the private key from the server
3. Test SSH login using the new user and custom SSH port
4. Follow the generated summary file for next steps

## Security Considerations

- The script disables root login via SSH
- SSH password authentication is disabled (key-based only)
- A random SSH port is used by default
- The firewall only allows necessary connections
- Fail2Ban is configured to block brute force attempts

## Customization

You can modify the script to suit your specific needs:

- Change the SSH port selection mechanism
- Modify firewall rules for additional services
- Adjust system hardening parameters
- Customize the Nginx configuration

## Troubleshooting

If you encounter issues:

1. Check the log file at `/var/log/server_setup.log`
2. Review the server_setup_summary.txt in the new user's home directory
3. Verify that the SSH configuration is correct before logging out

## License

This script is provided under the MIT License.
